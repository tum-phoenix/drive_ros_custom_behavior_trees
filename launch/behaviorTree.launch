<launch>
    <arg name="meta_command_out" default="/trajectory_meta_commands"/>
    <!-- Arguments passed from global launch file -->

    <!-- "random" variables (factors, etc) -->
        <!-- possible modes: "PARKING", "OBSTACLES"-->
        <arg name="mode"/>
        <arg name="clean_output"/>
        <arg name="output_show_computation_time"/>
        <arg name="tick_frequency"/>
        <arg name="object_following_break_factor"/>
        <arg name="break_distance_safety_factor"/>
        <!-- Speeds -->
        <arg name="general_max_speed"/>
        <arg name="general_max_speed_cautious"/>
        <arg name="max_bridge_speed"/>
        <arg name="parking_spot_search_speed"/>
        <arg name="max_lane_switch_speed"/>
        <arg name="intersection_turn_speed"/>
        <arg name="sharp_turn_speed"/>
        <arg name="very_sharp_turn_speed"/>
        <arg name="speed_zero_tolerance"/>
        <!-- Distances -->
        <arg name="min_sign_react_distance"/>
        <arg name="max_sign_react_distance"/>
        <arg name="overtake_distance"/> <!-- According to the regulations this value must be at least 0.3-->
        <arg name="barred_area_react_distance"/>
        <arg name="oncoming_traffic_clearance"/>
        <arg name="max_start_box_distance"/>
        <arg name="intersection_max_obj_distance"/>

        <!-- These are usually set by the BT and may be changed for testing purposes only!-->
        <arg name="dynamic_reconfigure_overwrite_runtime_vals"/>
        <arg name="start_value__overtaking_forbidden_zone"/>
        <arg name="start_value__express_way"/>
        <arg name="start_value__priority_road"/>
        <arg name="start_value__force_stop"/>
        <arg name="start_value__on_bridge"/>
        <arg name="start_value__speed_limit"/>
        <arg name="start_value__successful_parking_count"/>
        <arg name="start_value__give_way"/>
        <!-- Seperate the states with '|' if necessary !-->
        <arg name="initial_states" type="str"/>

    <node name="behavior_tree" pkg="drive_ros_custom_behavior_trees" type="BehaviorTree" output="screen">
      <param name="mode" value="$(arg mode)"/>
      <param name="clean_output" value="$(arg clean_output)"/>
      <param name="output_show_computation_time" value="$(arg output_show_computation_time)"/>
      <param name="tick_frequency" value="$(arg tick_frequency)"/>
      <param name="object_following_break_factor" value="$(arg object_following_break_factor)"/>
      <param name="break_distance_safety_factor" value="$(arg break_distance_safety_factor)"/>
      
      <param name="general_max_speed" value="$(arg general_max_speed)"/>
      <param name="general_max_speed_cautious" value="$(arg general_max_speed_cautious)"/>
      <param name="max_bridge_speed" value="$(arg max_bridge_speed)"/>
      <param name="parking_spot_search_speed" value="$(arg parking_spot_search_speed)"/>
      <param name="max_lane_switch_speed" value="$(arg max_lane_switch_speed)"/>
      <param name="intersection_turn_speed" value="$(arg intersection_turn_speed)"/>
      <param name="sharp_turn_speed" value="$(arg sharp_turn_speed)"/>
      <param name="very_sharp_turn_speed" value="$(arg very_sharp_turn_speed)"/>
      <param name="speed_zero_tolerance" value="$(arg speed_zero_tolerance)"/>
      
      <param name="min_sign_react_distance" value="$(arg min_sign_react_distance)"/>
      <param name="max_sign_react_distance" value="$(arg max_sign_react_distance)"/>
      <param name="overtake_distance" value="$(arg overtake_distance)"/>
      <param name="barred_area_react_distance" value="$(arg barred_area_react_distance)"/>
      <param name="oncoming_traffic_clearance" value="$(arg oncoming_traffic_clearance)"/>
      <param name="max_start_box_distance" value="$(arg max_start_box_distance)"/>
      <param name="intersection_max_obj_distance" value="$(arg intersection_max_obj_distance)"/>

      
      <param name="dynamic_reconfigure_overwrite_runtime_vals" value="$(arg dynamic_reconfigure_overwrite_runtime_vals)"/>
      <param name="start_value__overtaking_forbidden_zone" value="$(arg start_value__overtaking_forbidden_zone)"/>
      <param name="start_value__express_way" value="$(arg start_value__express_way)"/>
      <param name="start_value__priority_road" value="$(arg start_value__priority_road)"/>
      <param name="start_value__force_stop" value="$(arg start_value__force_stop)"/>
      <param name="start_value__on_bridge" value="$(arg start_value__on_bridge)"/>
      <param name="start_value__speed_limit" value="$(arg start_value__speed_limit)"/>
      <param name="start_value__successful_parking_count" value="$(arg start_value__successful_parking_count)"/>
      <param name="start_value__give_way" value="$(arg start_value__give_way)"/>
      
      <param name="initial_states" type="str" value="$(arg initial_states)"/>

      <!-- remap topics with arguments -->
      <remap from="trajectory_metadata" to="$(arg meta_command_out)"/>
    </node>
</launch>